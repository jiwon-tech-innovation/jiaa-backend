name: Auto Add PR to Project

on:
  pull_request:
    types: [opened] # PR이 처음 생성될 때만 실행

jobs:
  add-to-project:
    runs-on: ubuntu-latest
    steps:
      - name: Add PR to Project
        uses: actions/add-to-project@v1.0.1
        with:
          # 프로젝트 보드의 URL (반드시 project-url: 키를 앞에 써야 합니다)
          project-url: https://github.com/orgs/jiwon-tech-innovation/projects/1
          # 위에서 설정한 Secret 토큰 (들여쓰기를 위 라인과 맞추세요)
          github-token: ${{ secrets.PROJECT_TOKEN }}

      - name: Set Status to In review(PR)
        run: |
          gh project item-edit --id ${{ steps.add_pr.outputs.itemId }} \
          --field "Status" --value "PR" \
          --project-id 1 --owner "jiwon-tech-innovation"
        env:
          GH_TOKEN: ${{ secrets.PROJECT_TOKEN }}
